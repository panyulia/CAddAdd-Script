<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>debug</title>
	<script src="../sup-2.4.13.js"></script>
	<style>
		*{
			margin: 0;
			padding: 0;
			transition: var(--transition-s) all ease;
			background-repeat: no-repeat;
			background-size: 100vw 100vh;
			border-radius: 10px;

			--background-image: url("background.jpg");
			--appColor: #fff;
		}
		html{
			transition: 0s;
			overflow: hidden;
		}
		#defaultDesktop{
			position: absolute;
			transition: 0s;
			top: 0;
			left: 0;
			border-radius: 0;
			width: 100vw;
			height: 100vh;
			background-image: var(--background-image);
		}
		#down{
			--height: 50px;
			width: 100vw;
			transition: 0s;
			height: var(--height);
			position: absolute;
			top: calc(100vh - var(--height) - 5px);
			left: 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		#app,#run{
			width: auto;
			transition: 0s;
			background: #fff7;
			cursor: default;
			height: var(--height);
			display: flex;
			align-items: center;
		}
		#app img{
			background: #fff;
			width: 40px;
			height: 40px;
		}#run img{
			background: #fff;
			width: 40px;
			height: 40px;
		}
		.nbsp{
			width: 20px;
			height: var(--height);
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.app{
			display: flex;
			position: relative;
			background: var(--appColor);
			width: 40px;
			height: 40px;
			top: 0px;
			left: 0px;
			z-index: 1;
		}
	</style>
	<script>
		$(function(){
			$("#down").replace({
				nbsp:`<div class="nbsp">
				<svg width="3" height="25" style="background: #fff7;"></svg>
				</div>`
			});
			// up is before start
			let oTime="0.3";
			let x=5;
			let beishu=1;
			let s=(oTime/x)*beishu;
			$(".app").mouseup(function(){
				is=this;
				is.children[0].style.transition="opacity "+s+"s ease-in,border-radius "+s+"s ease-in";
				sleep(function(){
					is.children[0].style.display="none";
				},(oTime*1000/x)*beishu);
				is.style.position="relative";
				sleep(function(){
					is.children[0].style.opacity="0";
					is.children[0].style.width="100%";
					is.children[0].style.height="100%";
					is.children[0].style.borderRadius="0";
					is.style.borderRadius="0";
					is.style.width="100vw";
					is.style.height="100vh";
					is.style.top="calc(100vh / -2 - (-5px - var(--height) / 2))";
					is.style.left="5px";
				},0);
				is.setAttribute("class",is.getAttribute("class")+" isRun");
			});
			$("html").keydown(function(e){
				let is=$(".isRun")[0];
				if(e.key=='Escape'){
					is.style.borderRadius="10px";
					is.style.width="40px";
					is.style.height="40px";
					is.style.top="0";
					is.style.left="0";
					is.style.position="relative";
					is.children[0].style.display="block";
					is.children[0].style.borderRadius="10px";
					is.children[0].style.opacity="1";
					is.children[0].style.transition=s+"s ease-in";
				}
			});
			$("*").css("--transition-s",oTime+"s");
			interval(function(){
				if($(".isRun").length <= 1) {
					for(let i=1;i<$(".isRun").length;++i){
						$(".isRun")[i].setAttribute("class",/(.*)[^isRun]/.exec($(".isRun")[i].getAttribute("class"))[1]);
					}
				}
			},100);
		})
	</script>
</head>
<body>
	<div id="defaultDesktop">
		<div id="down">
			<div id="app">
				&nbsp;
				<div class="app" id="settings"><img src="settings.jpg"/></div>
				&nbsp;
			</div>
			{{ nbsp }}
			<div id="run">
				&nbsp;
				&nbsp;
			</div>
		</div>
	</div>
</body>
</html>
